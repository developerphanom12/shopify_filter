<!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Slider</title>
    
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"/>
  
    <style>
      .product-section {
        margin-bottom: 20px;
      }
      
      .productContainer {
        padding: 10px;
        margin-bottom: 10px;
      }
      .productContainer  h2{
        width:23vw
      }
      .productContainer img {
        max-width: 100%;
        height: auto;
        margin-bottom: 10px;
      }
      
      .variantsContainer p {
        margin: 5px 0;
      }
    </style>
  </head>
  <body>
  
  <div class="product-section">
    <div class="slider"></div>
  </div>
  
  <!-- Slick Carousel JavaScript -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js" async></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', async function() {
      try {
        const response = await fetch(`/apps/proxy/product`); // Update endpoint URL
        const data = await response.json();
        displayProducts(data);
      } catch (error) {
        console.error('Error fetching product data:', error);
      }
    });
  
    function displayProducts(data) {
      const slider = document.querySelector('.slider');
      
      if (slider) {
        slider.innerHTML = ''; 
        
        data.products.edges.forEach(productEdge => {
          const productNode = productEdge.node;
          
          const slideContent = `
            <div class="productContainer">
              <h2>${productNode.title}</h2>
              <p>${productNode.description || 'No description available'}</p>
              <img src="${productNode.images.edges[0].node.src}" alt="Product Image">
              <div class="variantsContainer">
                ${productNode.variants.edges.map(variantEdge => `
                  <p> Price: ${variantEdge.node.price}</p>
                `).join('')}
              </div>
            </div>
          `;
          // 
          // Append slide to the slider
          slider.innerHTML += slideContent;
        });
        
      } else {
        console.error('Slider element not found.');
      }
    }
  </script>
  
  </body>
  </html>
  